# Database Configuration
DATABASE_URL=postgresql://user:password@host:port/database
# OR use individual variables:
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=accounting_db
# DB_USER=postgres
# DB_PASSWORD=postgres

# Server Configuration
PORT=3001
NODE_ENV=development

# JWT Configuration (CRITICAL - Change in production!)
# If JWT_SECRET is missing in development, a temporary insecure key is used
# In production, the server will refuse to start without this variable.
JWT_SECRET=your-super-secret-jwt-key-change-in-production-IMMEDIATELY
JWT_EXPIRES_IN=24h

# IMPORTANT: Generate a strong JWT_SECRET for production using:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# File Upload Configuration
# For Railway persistent volumes, use the mounted volume path
# For local development, leave commented (defaults to server/uploads)
# UPLOADS_PATH=/app/server/uploads

# Railway Deployment Notes:
# 1. Create a volume in Railway dashboard (Service → Settings → Volumes)
# 2. Mount path: /app/server/uploads
# 3. Set UPLOADS_PATH environment variable to: /app/server/uploads
# 4. The system will automatically create subdirectories:
#    - /app/server/uploads/profiles/       (Student photos - 3 MB max)
#    - /app/server/uploads/backgrounds/    (Certificate backgrounds - 5 MB max)
#    - /app/server/uploads/fonts/          (Custom fonts - 2 MB max)
#    - /app/server/uploads/declarations/   (Declaration attachments - 10 MB max)

# Google OAuth Configuration (for G-Contacts synchronization)
# To set up:
# 1. Go to Google Cloud Console (https://console.cloud.google.com)
# 2. Create or select a project
# 3. Enable the "People API"
# 4. Go to APIs & Services > OAuth consent screen
#    - Set type to "External"
#    - Add scope: https://www.googleapis.com/auth/contacts
#    - IMPORTANT: Publish the app to avoid token expiration after 7 days
# 5. Go to APIs & Services > Credentials
#    - Create OAuth 2.0 Client ID (Web application)
#    - Add authorized redirect URIs:
#      - Production: https://your-domain.com/api/google-oauth/callback
#      - Development: http://localhost:3001/api/google-oauth/callback
# 6. Copy the Client ID and Client Secret below
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_REDIRECT_URI=https://your-domain.com/api/google-oauth/callback

# ==============================================
# DIRAY CENTRE INTEGRATION (External Vitrine Site)
# ==============================================
# API key shared with Diray Centre for external authentication
# Generate a secure key using: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
DIRAY_API_KEY=your-secure-diray-api-key-here

# Optional: Diray Centre frontend URL (for CORS)
# DIRAY_FRONTEND_URL=https://diray.ma
